<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>Swift4.2ä¸­çš„éšæœºæ•° | æ±å¼•ç”Œè¶Š</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="æˆ‘æ˜¯å­™äºšæ´²(@sunyazhou13),ä¸€åæ¥è‡ªåŒ—å›½å†°åŸçš„iOSå¼€å‘è€…,èµ°åœ¨æˆä¸ºåœ£è´¤çš„è·¯ä¸Š.">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Swift4.2ä¸­çš„éšæœºæ•° | æ±å¼•ç”Œè¶Š">
    <meta name="twitter:description" content="æˆ‘æ˜¯å­™äºšæ´²(@sunyazhou13),ä¸€åæ¥è‡ªåŒ—å›½å†°åŸçš„iOSå¼€å‘è€…,èµ°åœ¨æˆä¸ºåœ£è´¤çš„è·¯ä¸Š.">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Swift4.2ä¸­çš„éšæœºæ•° | æ±å¼•ç”Œè¶Š">
    <meta property="og:description" content="æˆ‘æ˜¯å­™äºšæ´²(@sunyazhou13),ä¸€åæ¥è‡ªåŒ—å›½å†°åŸçš„iOSå¼€å‘è€…,èµ°åœ¨æˆä¸ºåœ£è´¤çš„è·¯ä¸Š.">

    
    <meta name="author" content="sunyazhou">
    
    <link rel="stylesheet" href="/css/vno.css">
    <link rel="stylesheet" href="//apps.bdimg.com/libs/fontawesome/4.1.0/css/font-awesome.min.css">

    
    <link rel="icon" href="/images/favicon.ico">
    

    <meta name="generator" content="hexo"/>
    
    <link rel="alternate" type="application/rss+xml" title="æ±å¼•ç”Œè¶Š" href="/atom.xml">
    

    <link rel="canonical" href="https://www.sunyazhou.com/2018/06/08/20180608Swift-Random2/"/>

    
    <link rel="author" href="https://plus.google.com/107423989995616646161"/>
    

    
<script type="text/javascript">
	var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?36adfbed8b30cd669f1457e388071878";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

</script>

</head>

<body class="home-template no-js">

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background-cover.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="å‰å¾€ æ±å¼•ç”Œè¶Š çš„ä¸»é¡µ"><img src="/images/logo2.jpg" width="80" alt="æ±å¼•ç”Œè¶Š logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for æ±å¼•ç”Œè¶Š">æ±å¼•ç”Œè¶Š</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">ä¸æ–­å­¦ä¹ , ä¸æ—¶ä¿±è¿›.</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">å—¨,æˆ‘æ˜¯å­™äºšæ´²(@sunyazhou13),ä¸€åæ¥è‡ªåŒ—å›½å†°åŸçš„iOSå¼€å‘è€…,ä¹Ÿæè¿‡ä¸€äº›mac.ç°å±…å¸éƒ½åŒ—äº¬.å¼€å‘æ•°å¹´æœ‰ä½™,æ²¡æœ‰ä¸ºå¾€åœ£ç»­ç»å­¦æ·±æ„Ÿæƒ­æ„§,å§‹äº2016.æœ›è¯¸ä½åŒä»å¤šå¤šæŒ‡æ•™.</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="è®¿é—®åšå®¢" class="blog-button">æ–‡ç« </a></li>
            
              <li class="navigation__item"><a href="/archives">å½’æ¡£</a></li>
            
              <li class="navigation__item"><a href="/projects">ä½œå“</a></li>
            
              <li class="navigation__item"><a href="/aboutme">å…³äº</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  
  <li class="navigation__item">
    <a href="https://weibo.com/sunyazhou13" title="æˆ‘çš„å¾®åš" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>


  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/sunyazhou13" title="æŸ¥çœ‹æˆ‘çš„GitHubä¸»é¡µ" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  
  <li class="navigation__item">
    <a href="https://plus.google.com/107423989995616646161" title="Google+" target="_blank">
      <i class='social fa fa-google-plus-square'></i>
      <span class="label">Google+</span>
    </a>
  </li>


<!-- Facebook -->


<!-- Twitter -->

  <li class="navigation__item">
    <a href="https://twitter.com/sunyazhou" title="ä¸ŠTwitteræ‰¾æˆ‘" target="_blank">
      <i class='social fa fa-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li>

<!-- instagram -->


  <li class="navigation__item">
    <a href="/atom.xml" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>


  <li class="navigation__item">
    <a href="mailto:sunyazhou13@163.com" title="é‚®ä»¶è”ç³»æˆ‘" target="_blank">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>


  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-slate"></div>
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2018-06-08T01:18:03.000Z" class="post-list__meta--date date">2018-06-08</time>
 &#8226; <span class="post-meta__tags tags">åˆ†ç±»&nbsp;
  <a class="tag-link" href="/tags/iOSå¼€å‘/">iOSå¼€å‘</a>, <a class="tag-link" href="/tags/macOSå¼€å‘/">macOSå¼€å‘</a>

</span>
    </div>
    <h1 class="post-title">Swift4.2ä¸­çš„éšæœºæ•°</h1>
  </header>

  <section class="post">
    <p><img src="https://raw.githubusercontent.com/sunyazhou13/sunyazhou13.github.io-images/dac725ebc1b0f7a6a6c99265f76153b5bfb6d09d/20180608Swift-Random2/whatisnewinswift.png" alt=""></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« å‘å¸ƒä¸ä¹…WWDC2018å°±æ‹‰å¼€äº†åºå¹•,è®©æˆ‘è§‰å¾—æœ‰ä¸€ç‚¹æ¯”è¾ƒè›‹ç–¼çš„(a bit of pain) æ˜¯swift4.2ä¸­å¢åŠ äº†ç³»ç»Ÿçš„éšæœºæ•°æ”¯æŒ.æ‰€ä»¥ä¸å¾—ä¸å®Œå–„çš„å¥½ä¸Šä¸€ç¯‡æ–‡ç« çš„ç¼ºæ¼å’Œæ–°æŠ€æœ¯çš„ç ”ç©¶å­¦ä¹ .ç‰¹æ­¤æ–°å‘ä¸€ç¯‡æ–°çš„éšæœºæ•°æ–‡ç« ä»¥å½°å…¶å’.</p>
<h2 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h2><ul>
<li>Xcode10æˆ–è€…æ›´é«˜ç‰ˆæœ¬ </li>
<li>Swift4.2</li>
<li>ä½¿ç”¨Xcodeä¸­çš„Playground</li>
</ul>
<h2 id="ç”Ÿæˆéšæœºæ•°"><a href="#ç”Ÿæˆéšæœºæ•°" class="headerlink" title="ç”Ÿæˆéšæœºæ•°"></a>ç”Ÿæˆéšæœºæ•°</h2><p>åœ¨ä¸Šä¸€ç¯‡ä¸­æˆ‘ä»¬å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨å›´ç»•<a href="https://man.openbsd.org/arc4random.3" target="_blank" rel="external">arcrandom()</a>å‡½æ•°æ¥ä»‹ç»éšæœºæ•°.å½“ç„¶ä¹Ÿæœ‰å®ƒçš„ä¸€äº›å˜ç§.egï¼šarc4random_uniform(),rand(),random().ä½†æ— è®ºå¦‚ä½•è¿™äº›å‡½æ•°å¤šæ•°éƒ½æ˜¯ç³»ç»Ÿçº§å‡½æ•°ã€‚</p>
<p>åœ¨swift4.2ä¸­ æ‰€æœ‰çš„ æ•°å­—ç±»å‹(å°±æ˜¯æ™®é€šæ•°æ®ç±»å‹ä¸­ä»£è¡¨æ•°å­—çš„)éƒ½æœ‰ä¸€ä¸ªé™æ€æ–¹æ³•<code>random(in:)</code>,è¿™ä¸ªæ–¹æ³•å°†æ¥æ”¶ä¸€ä¸ªèŒƒå›´(Range)æˆ–è€…å¼€é—­èŒƒå›´,è¿”å›ä¸€ä¸ªæ— åºçš„éšæœºæ•°(a uniform distribution). è¿™äº›éšæœºå‡½æ•°å°†ä¼šåŒ…å«åœ¨swiftçš„æ ‡å‡†åº“ä¸­,å¦‚æœè·¨å¹³å°çš„è¯æ ‡å‡†åº“å‡½æ•°éƒ½æ˜¯ä¸€è‡´çš„,ä¸åƒä¸Šé¢ä»‹ç»çš„ç³»ç»Ÿéšæœºå‡½æ•°.</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"></div><div class="line"><span class="type">Int</span>.random(<span class="keyword">in</span>: <span class="number">1</span>...<span class="number">1000</span>) <span class="comment">//â†’ 580</span></div><div class="line"><span class="type">Double</span>.random(<span class="keyword">in</span>: <span class="number">0</span>..&lt;<span class="number">1</span>) <span class="comment">//â†’ 0.3211009027224093</span></div><div class="line"><span class="type">UInt32</span>.random(<span class="keyword">in</span>: <span class="number">0xD800</span>...<span class="number">0xDFFF</span>) <span class="comment">//â†’ 56324</span></div></pre></td></tr></table></figure>
<h3 id="æ¨¡åå·®-Modulo-bias"><a href="#æ¨¡åå·®-Modulo-bias" class="headerlink" title="æ¨¡åå·®(Modulo bias)"></a>æ¨¡åå·®(Modulo bias)</h3><p>ä»¥ä¸‹ä»£ç æ¼”ç¤ºäº†æˆ‘ä»¬å¸¸ç”¨çš„å–æ¨¡ æ–¹å¼éšæœº</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Wrong! âŒ</span></div><div class="line"><span class="keyword">let</span> between0And5 = <span class="type">UInt8</span>.random() % <span class="number">6</span></div></pre></td></tr></table></figure>
<p>è¿™ç§éšæœºæ•° æœ‰å¯èƒ½ä¸å¤Ÿå‡åŒ€åˆ†å¸ƒ,è¿™ç§éå‡åŒ€åˆ†å¸ƒçš„æ–¹å¼å°±å«<a href="https://www.quora.com/What-is-modulo-bias" target="_blank" rel="external"><code>æ¨¡åå·®</code></a>.</p>
<p>é‚£å¦‚ä½•è§£å†³è¿™ç§è«åå·®çš„é—®é¢˜å‘¢?</p>
<p>åœ¨swiftä¸­å°±æ˜¯ç”¨æˆ‘ä¸Šè¾¹ä»‹ç»çš„æ–¹æ³•.</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Correct âœ…</span></div><div class="line"><span class="keyword">let</span> between0And5 = <span class="type">UInt8</span>.random(<span class="keyword">in</span>: <span class="number">0</span>..&lt;<span class="number">6</span>) <span class="comment">// â†’ 5</span></div></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦éšæœºä¸€ä¸ª<code>æ•°å­—æ•°æ®ç±»å‹</code>å…¨èŒƒå›´çš„éšæœºæ•°çš„è¯å¯ä»¥ä½¿ç”¨ <code>.min ... .max</code>æ¥è¿›è¡ŒèŒƒå›´éšæœº. å¦‚ä¸‹ä»£ç :</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> between0And255 = <span class="type">UInt8</span>.random(<span class="keyword">in</span>: .<span class="built_in">min</span> ... .<span class="built_in">max</span>) <span class="comment">// â†’ 190</span></div></pre></td></tr></table></figure>
<h3 id="Boolå€¼éšæœº"><a href="#Boolå€¼éšæœº" class="headerlink" title="Boolå€¼éšæœº"></a>Boolå€¼éšæœº</h3><p>è™½ç„¶è¿™ç§ç±»å‹å®Œå…¨å¯ä»¥ç”¨ %2 ==0 æˆ–è€… %2==0 æ¥è§£å†³,ä½†æ˜¯swiftè¿˜æ˜¯å¾ˆè´Ÿè´£ä»»çš„å¸®æˆ‘ä»¬åšåˆ°äº†è¿™ä¸€ç‚¹, ä¸¾ä¸ª<code>æŠ›ç¡¬å¸</code>åœºæ™¯çš„éšæœºä¾‹å­:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">coinToss</span><span class="params">(<span class="built_in">count</span> tossCount: Int)</span></span> -&gt; (heads: <span class="type">Int</span>, tails: <span class="type">Int</span>) &#123;</div><div class="line">    <span class="keyword">var</span> result = (heads: <span class="number">0</span>, tails: <span class="number">0</span>)</div><div class="line">    <span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;tossCount &#123;</div><div class="line">        <span class="keyword">let</span> toss = <span class="type">Bool</span>.random()</div><div class="line">        <span class="keyword">if</span> toss &#123;</div><div class="line">            result.heads += <span class="number">1</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            result.tails += <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> (heads, tails) = coinToss(<span class="built_in">count</span>: <span class="number">100</span>)</div><div class="line"></div><div class="line"><span class="comment">// â†’ (heads 54, tails 46)</span></div></pre></td></tr></table></figure>
<blockquote>
<p>heads â†’ äººå¤´é¢<br>tails â†’ èƒŒé¢</p>
</blockquote>
<h3 id="å®¹å™¨ç±»å‹çš„å…ƒç´ éšæœº-Random-collection-elements"><a href="#å®¹å™¨ç±»å‹çš„å…ƒç´ éšæœº-Random-collection-elements" class="headerlink" title="å®¹å™¨ç±»å‹çš„å…ƒç´ éšæœº(Random collection elements)"></a>å®¹å™¨ç±»å‹çš„å…ƒç´ éšæœº(Random collection elements)</h3><p>é¦–å…ˆå¤§å®¶å¯ä»¥<a href="https://developer.apple.com/documentation/swift/collection" target="_blank" rel="external"><code>Collection</code></a>ç†è§£æˆä¸€ä¸ªé›†æˆ<code>NSObject</code>çš„ç±»å®ç°äº†å®¹å™¨åè®®çš„ç±»å‹.eg: æ•°ç»„ï¼Œå­—å…¸ç­‰ç­‰ã€‚ã€‚ã€‚ã€‚</p>
<p>è¿™äº›<code>Collection</code> ç±»å‹éƒ½æœ‰ä¸€ä¸ª<code>randomElement()</code>æ–¹æ³•(å¯ä»¥çœ‹ä¸‹ä¸Šä¸€ç¯‡æ–‡ç« æœ«å°¾ä»‹ç»çš„10ä¸ªå­—ç¬¦ä¸²çš„æ•°).è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ª<code>Optional</code>å¯é€‰ç±»å‹.å› ä¸º<code>Collection</code>å¯èƒ½ä¸ºç©º.</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> emptyRange = <span class="number">10</span>..&lt;<span class="number">10</span></div><div class="line">emptyRange.isEmpty <span class="comment">// â†’ true</span></div><div class="line">emptyRange.randomElement() <span class="comment">// â†’ nil</span></div></pre></td></tr></table></figure>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°å…ƒç´ éšæœºä¸ºnil</p>
</blockquote>
<p>æˆ‘ä»¬ä¸¾ä¸ªä¸Šä¸€èŠ‚çš„ä¾‹å­è¿˜æµ‹è¯•ä¸€ä¸‹</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="string">"0"</span>, <span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>, <span class="string">"6"</span>, <span class="string">"7"</span>, <span class="string">"8"</span>, <span class="string">"9"</span>]</div><div class="line"><span class="keyword">let</span> randomElement = arr.randomElement()!  <span class="comment">// â†’ "8"</span></div></pre></td></tr></table></figure>
<p>ä¸¾ä¸ªå­—ç¬¦ä¸²emotionè¡¨æƒ…çš„demo</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> emotions = <span class="string">"ğŸ˜€ğŸ˜‚ğŸ˜ŠğŸ˜ğŸ¤ªğŸ˜ğŸ˜©ğŸ˜­ğŸ˜¡"</span></div><div class="line"><span class="keyword">let</span> randomEmotion = emotions.randomElement()! <span class="comment">// â†’ "ğŸ˜¡"</span></div></pre></td></tr></table></figure>
<h3 id="Shuffling-é›†åˆéšæœºæ’åˆ—-æ´—ç‰Œç®—æ³•"><a href="#Shuffling-é›†åˆéšæœºæ’åˆ—-æ´—ç‰Œç®—æ³•" class="headerlink" title="Shuffling é›†åˆéšæœºæ’åˆ—(æ´—ç‰Œç®—æ³•)"></a>Shuffling é›†åˆéšæœºæ’åˆ—(æ´—ç‰Œç®—æ³•)</h3><p>ä½¿ç”¨<a href="https://developer.apple.com/documentation/swift/sequence/2996816-shuffled" target="_blank" rel="external">shuffled()</a>æ–¹æ³•å»éšæœºæ’åˆ—ä¸€ä¸ªåºåˆ—æˆ–å®¹æ˜“.</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">(<span class="number">1</span>...<span class="number">20</span>).shuffled() </div><div class="line"><span class="comment">// â†’ numbers is now [16, 9, 2, 18, 5, 13, 8, 11, 17, 3, 6, 1, 14, 7, 10, 15, 20, 19, 12, 4]</span></div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå®ç°äº†ä¸€ä¸ªç±»ä¼¼æ´—ç‰Œç®—æ³•çš„æ’åº 1~20 ä¹‹é—´çš„æ•° æ³¨æ„ï¼šå·¦å³éƒ½æ˜¯é—­åŒºé—´(é—­åŒºé—´åŒ…å«æœ¬èº«) å› ä¸ºè¿™é‡Œç”¨çš„æ˜¯<code>...</code>,ä¸ç†è§£å¤§å®¶å¯ä»¥æŸ¥æ‰¾ä¸€ä¸‹swiftç›¸å…³åŒºé—´æ ‡è¯†çš„çŸ¥è¯†.</p>
<h2 id="éšæœºæ•°ç”Ÿæˆçš„åè®®ï¼ˆRandom-number-generatorsï¼‰"><a href="#éšæœºæ•°ç”Ÿæˆçš„åè®®ï¼ˆRandom-number-generatorsï¼‰" class="headerlink" title="éšæœºæ•°ç”Ÿæˆçš„åè®®ï¼ˆRandom number generatorsï¼‰"></a>éšæœºæ•°ç”Ÿæˆçš„åè®®ï¼ˆRandom number generatorsï¼‰</h2><p><code>Random number generators</code>ç®€ç§°<code>RNG</code>,ä»¥ä¸‹ç®€ç§°<code>RNG</code>.</p>
<h3 id="é»˜è®¤çš„RNG"><a href="#é»˜è®¤çš„RNG" class="headerlink" title="é»˜è®¤çš„RNG"></a>é»˜è®¤çš„RNG</h3><p>ä»¥ä¸Šä»‹ç»çš„ä½¿ç”¨æ–¹æ³•éƒ½æ˜¯è¢«å®šä¹‰åœ¨swiftçš„æ ‡å‡†åº“ä¸­çš„æ–¹æ³•. å«<a href="https://forums.swift.org/t/se-0202-amendment-proposal-rename-random-to-defaultrandomnumbergenerator/12942" target="_blank" rel="external">Random.default</a></p>
<p><a href="https://github.com/apple/swift-evolution/blob/master/proposals/0202-random-unification.md" target="_blank" rel="external">SE-0202</a> è®¨è®ºäº†è¿™ç§é»˜è®¤éšæœºçš„ä¸€äº›é—®é¢˜</p>
<p>æˆ‘åœ¨è¿™é‡Œç®€è¦ä¸€ä¸‹</p>
<blockquote>
<p>The aspiration is that this RNG should be cryptographically secure, provide reasonable performance, and should be thread safe. If a vendor is unable to provide these goals, they should document it clearly. â€¦ if an RNG on a platform has the possibility of failing, then it must fail [i.e. trap] when it is unable to complete its operation.<br>å¤§æ¦‚æ„æ€å°±æ˜¯ é«˜æ€§èƒ½,é«˜å®‰å…¨æ€§,çº¿ç¨‹å®‰å…¨â€¦. </p>
</blockquote>
<h3 id="è‡ªå®šä¹‰RNGs"><a href="#è‡ªå®šä¹‰RNGs" class="headerlink" title="è‡ªå®šä¹‰RNGs"></a>è‡ªå®šä¹‰RNGs</h3><p>å¯¹äºå¤§å¤šæ•°ç®€å•çš„ç”¨ä¾‹ï¼Œç¼ºçœçš„RNGåº”è¯¥æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨çš„ä»£ç å¯¹éšæœºæ•°ç”Ÿæˆå™¨æœ‰ç‰¹æ®Šçš„è¦æ±‚ï¼Œæ¯”å¦‚ç‰¹å®šçš„ç®—æ³•æˆ–ç”¨å¯é‡å¤çš„ç§å­åˆå§‹åŒ–RNGçš„èƒ½åŠ›ï¼Œé‚£ä¹ˆæ‚¨å°±å¯ä»¥é€šè¿‡é‡‡ç”¨éšæœºæ•°ç”Ÿæˆå™¨åè®®æ¥å®ç°è‡ªå·±çš„RNGã€‚åè®®åªæœ‰ä¸€ä¸ªè¦æ±‚:<code>next()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•äº§ç”Ÿ<code>8ä¸ªæ–°çš„å­—èŠ‚éšæœºæ•°</code>:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">RandomNumberGenerator</span> </span>&#123;</div><div class="line">    <span class="comment">/// Returns a value from a uniform, independent</span></div><div class="line">    <span class="comment">/// distribution of binary data.</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">next</span><span class="params">()</span></span> -&gt; <span class="type">UInt64</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„:åè®®éœ€è¦ç»Ÿä¸€çš„åˆ†å¸ƒã€‚å…¶æ€æƒ³æ˜¯ï¼Œéœ€è¦å…·æœ‰éå‡åŒ€åˆ†å¸ƒçš„éšæœºå€¼çš„ç”¨æˆ·å¯ä»¥åœ¨ç¬¬äºŒæ­¥å°†æœŸæœ›çš„åˆ†å¸ƒåº”ç”¨åˆ°å‡åŒ€åˆ†å¸ƒéšæœºæ€§åºåˆ—é‡Œã€‚<br>å°±æ˜¯å¦‚æœæƒ³æŒ‰ç…§è‡ªå·±çš„æ–¹æ³•éšæœºéœ€è¦å§next()å‡½æ•°å†™ä¸Š,å†™å¥½æ³›å‹å‡½æ•°è§„åˆ™å°±è¡Œäº†.</p>
</blockquote>
<h3 id="ä½¿ç”¨è‡ªå®šä¹‰éšæœºRNG"><a href="#ä½¿ç”¨è‡ªå®šä¹‰éšæœºRNG" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰éšæœºRNG"></a>ä½¿ç”¨è‡ªå®šä¹‰éšæœºRNG</h3><p>æ‰€æœ‰ç”¨äºç”Ÿæˆéšæœºå€¼çš„æ ‡å‡†åº“apiéƒ½æä¾›äº†å…è®¸ç”¨æˆ·ä¼ å…¥è‡ªå®šä¹‰éšæœºæ•°ç”Ÿæˆå™¨çš„æ–¹æ³•é‡è½½ã€‚ä¾‹å¦‚ï¼ŒIntç±»å‹æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">random</span><span class="params">(<span class="keyword">in</span> range: Range&lt;Int&gt;)</span></span> -&gt; <span class="type">Int</span> &#123; ... &#125;</div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">random</span>&lt;T&gt;<span class="params">(<span class="keyword">in</span> range: Range&lt;Int&gt;,</span></span></div><div class="line">        using generator: <span class="keyword">inout</span> T) -&gt; <span class="type">Int</span></div><div class="line">        <span class="keyword">where</span> <span class="type">T</span>: <span class="type">RandomNumberGenerator</span> &#123; ... &#125;</div><div class="line">    <span class="comment">// The overloads that take a ClosedRange are not shown</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ª<code>generator</code>å‚æ•°éœ€è¦æ€»æ˜¯ä¼ å…¥<a href="https://docs.swift.org/swift-book/ReferenceManual/Declarations.html#ID545" target="_blank" rel="external"><code>inout</code></a>,å› ä¸ºåœ¨äº§ç”Ÿæ–°çš„éšæœºæ€§æ—¶ï¼ŒRNGsé€šå¸¸ä¼šæ”¹å˜å®ƒä»¬çš„çŠ¶æ€ã€‚</p>
<p>ä¸‹é¢çœ‹ä¸‹æˆ‘ä»¬æ€ä¹ˆè°ƒç”¨è‡ªå®šä¹‰éšæœº, æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¯å˜çš„å¹¶ä¸”æ»¡è¶³inoutçš„è¦æ±‚çš„æ–¹æ³•.</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> mersenneTwister = <span class="type">MersenneTwisterRNG</span>(...) <span class="comment">// assume this exists</span></div><div class="line"><span class="type">Int</span>.random(<span class="keyword">in</span>: <span class="number">10</span>..&lt;<span class="number">20</span>, using: &amp;mersenneTwister)</div></pre></td></tr></table></figure>
<h3 id="åœ¨è‡ªæœ‰ç±»å‹ä¸­ç”Ÿæˆéšæœºå€¼"><a href="#åœ¨è‡ªæœ‰ç±»å‹ä¸­ç”Ÿæˆéšæœºå€¼" class="headerlink" title="åœ¨è‡ªæœ‰ç±»å‹ä¸­ç”Ÿæˆéšæœºå€¼"></a>åœ¨è‡ªæœ‰ç±»å‹ä¸­ç”Ÿæˆéšæœºå€¼</h3><p>é€šè¿‡ä¸Šé¢æˆ‘ä»¬äº†è§£åˆ°</p>
<p>è‡ªå®šä¹‰éšæœºåè®®éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ ‡å‡†åº“æ¨¡å¼çš„æ­¥éª¤:</p>
<ul>
<li>æä¾›é™æ€éšæœºæ–¹æ³•<code>random() -&gt; Self</code> è¿™ä¸ªæ–¹æ³•ä½¿ç”¨é»˜è®¤çš„RNG,å¦‚æœæˆ‘ä»¬è§„èŒƒéšæœºèŒƒå›´çš„æ—¶å€™è¿™ä¸ªå‡½æ•°èƒ½è¡¥å……é¢å¤–å‚æ•°.ä»¥ä¾¿äºæˆ‘ä»¬è§„èŒƒéšæœºçš„range.  </li>
<li>æä¾›ç¬¬äºŒä¸ªæ–¹æ³•<code>random&lt;T: RandomNumberGenerator&gt;(using generator: inout T) -&gt; Self</code>è¿™ä¸ªæ˜¯ç”Ÿæˆé»˜è®¤éšæœºæ•°çš„æ ¸å¿ƒæ–¹æ³•.</li>
</ul>
<p>ä¸¾ä¸ªæ‰‘å…‹æ¸¸æˆä¸­çš„æšä¸¾ä¾‹å­, è¿™é‡Œé¢æˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0194-derived-collection-of-enum-cases.md" target="_blank" rel="external"><code>Swift4.2</code></a>ä¸­çš„<a href="https://developer.apple.com/documentation/swift/caseiterable" target="_blank" rel="external">allCase</a>å±æ€§.</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Suit</span>: <span class="title">String</span>, <span class="title">CaseIterable</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> diamonds = <span class="string">"â™¦"</span></div><div class="line">    <span class="keyword">case</span> clubs = <span class="string">"â™£"</span></div><div class="line">    <span class="keyword">case</span> hearts = <span class="string">"â™¥"</span></div><div class="line">    <span class="keyword">case</span> spades = <span class="string">"â™ "</span></div><div class="line">    </div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">random</span><span class="params">()</span></span> -&gt; <span class="type">Suit</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Suit</span>.random(using: &amp;<span class="type">Random</span>.<span class="keyword">default</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">random</span>&lt;T: RandomNumberGenerator&gt;</span></div><div class="line">        <span class="params">(using generator: <span class="keyword">inout</span> T)</span> -&gt; <span class="type">Suit</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// Force-unwrap can't fail as long as the</span></div><div class="line">        <span class="comment">// enum has at least one case.</span></div><div class="line">        <span class="keyword">return</span> allCases.randomElement(using: &amp;generator)!</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> randomSuit = <span class="type">Suit</span>.random() <span class="comment">// â†’ clubs</span></div><div class="line">randomSuit.rawValue <span class="comment">// â†’ "â™ "</span></div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç¯‡è¡¥å……äº†æ–°ç‰ˆSwift4.2ä¸­å¯¹æ ‡å‡†åº“ä¸­çš„éšæœºå‡½æ•°æ”¯æŒ,ä¹Ÿä»‹ç»äº†æ´—ç‰Œå‡½æ•°é»˜è®¤éšæœºå‡åŒ€æ’åˆ—,å¸Œæœ›å°ä¼™ä¼´ä»¬çœ‹å®Œæœ‰æ‰€æ”¶è·,æœ‰é—®é¢˜è¿˜è¯·å¤šå¤šæŒ‡æ•™</p>
<p>å…¨æ–‡å®Œ</p>
<p><a href="https://oleb.net/blog/2018/06/random-numbers-in-swift/" target="_blank" rel="external">å‚è€ƒ</a></p>

  </section>

</article>


    <! -- æ·»åŠ æèµ å›¾æ ‡ -->
<div class ="post-donate">
    <div id="donate_board" class="donate_bar center">
        <a id="btn_donate" class="btn_donate" href="javascript:;" title="æ‰“èµ"></a>
        <span class="donate_txt">
           â†‘<br>
           æ¬£èµæ­¤æ–‡ï¼Ÿæ±‚é¼“åŠ±ï¼Œæ±‚æ”¯æŒï¼
        </span>
        <br>
    </div>  
    <div id="donate_guide" class="donate_bar center hidden" >
        <!-- æ–¹å¼ä¸€ï¼š 
            ![](/img/Alipay.jpg)
            ![](/img/WeChatpay.jpg)
        -->
        <!-- æ–¹å¼äºŒï¼›
            step1ï¼šåœ¨_config.ymlä¸­æ·»åŠ é…ç½®
                Alipay: /img/Alipay.jpg
                WeChatpay: /img/WeChatpay.jpg
            step2ï¼šæ­¤å¤„ä¸¤å¼ å›¾ç‰‡çš„è·¯å¾„åˆ†åˆ«è®¾ç½®ä¸ºå¦‚ä¸‹
                <img src="undefined"
                <img src="undefined"
        -->
        <!-- æ”¯ä»˜å®æ‰“èµå›¾æ¡ˆ -->
        <img src="/images/Alipay.jpg" alt="æ”¯ä»˜å®æ‰“èµ">
        <!-- å¾®ä¿¡æ‰“èµå›¾æ¡ˆ -->
        <img src="/images/WeChatpay.jpg" alt="å¾®ä¿¡æ‰“èµ">
    </div>
    <script type="text/javascript">
        document.getElementById('btn_donate').onclick = function(){
            $('#donate_board').addClass('hidden');
            $('#donate_guide').removeClass('hidden');
        }
    </script>
</div>

<! -- æ·»åŠ æèµ å›¾æ ‡ -->



<section class="read-more">
     
        
            <div class="read-more-item">
                <span class="read-more-item-dim">æœ€è¿‘çš„æ–‡ç« </span>
                <h2 class="post-list__post-title post-title"><a href="/2018/06/15/20180615NSAttributeString/" title="ä½¿ç”¨NSAttributeStringå®ç°ä¸åŒé¢œè‰²å¤§å°æ˜¾ç¤º">ä½¿ç”¨NSAttributeStringå®ç°ä¸åŒé¢œè‰²å¤§å°æ˜¾ç¤º</a></h2>
                <p class="excerpt">
                
                
å‰è¨€æœ€è¿‘å¼€å‘éœ€æ±‚é‡åˆ°ä¸€ä¸ªæ¯”è¾ƒç®€å•ä½†åˆæ£˜æ‰‹çš„é—®é¢˜.å…ˆçœ‹éœ€æ±‚

ä¸€ä¸ªUILabelæ˜¾ç¤ºä¸åŒå¤§å°é¢œè‰²çš„å­—ç¬¦ä¸²,å½“ç„¶æˆ‘ä»¬é¦–å…ˆçš„æƒ³åˆ°å±æ€§å­—ç¬¦ä¸²,ä½†æ˜¯æ³¨æ„: æˆ‘ä»¬è¿™é‡Œè¦å¤„ç†å›½é™…åŒ–å®Œæˆçš„å­—ç¬¦ä¸²ä¹Ÿå°±æ˜¯è¯´ï¼š
å¿…é¡»åœ¨å›½é™…åŒ–å®Œæˆä»¥åæ‰èƒ½è¿½åŠ æˆ‘ä»¬çš„é€»è¾‘,è€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±åŠ å±æ€§å­—ç¬¦ä¸²
æ¯”å¦‚:  2åˆ†14ç§’ or 2min14
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2018-06-15T02:10:58.000Z" class="post-list__meta--date date">2018-06-15</time>
 &#8226; <span class="post-list__meta--tags tags">äº&nbsp;
  <a class="tag-link" href="/tags/iOSå¼€å‘/">iOSå¼€å‘</a>, <a class="tag-link" href="/tags/macOSå¼€å‘/">macOSå¼€å‘</a>

</span><a class="btn-border-small" href="/2018/06/15/20180615NSAttributeString/">ç»§ç»­é˜…è¯»</a></div>

            </div>
        

        
            <div class="read-more-item">
                <span class="read-more-item-dim">æ›´æ—©çš„æ–‡ç« </span>
                <h2 class="post-list__post-title post-title"><a href="/2018/06/01/20180601Random/" title="Swiftä¸­çš„éšæœºæ•°">Swiftä¸­çš„éšæœºæ•°</a></h2>
                <p class="excerpt">
                
                
å‰è¨€ä»Šå¤©å„¿ç«¥èŠ‚,å†™ä¸€ç¯‡éšæœºæ•°æŠ€æœ¯æ–‡ç« çºªå¿µç•™å®ˆå„¿ç«¥(èµ„æ·±)çš„ç«¥å¹´.
swiftä¸­çš„éšæœºæ•°ä½¿ç”¨åœ¨æˆ‘ä»¬å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ç”¨åˆ°æ±‚å–ä¸€äº›éšæœºæ•°,ä»Šå¤©åˆ—ä¸¾å‡ ç§å†™ç¯‡æ–‡ç« 
æ•´å‹éšæœºæ•°é¦–å…ˆæ˜¯è¿™ä¸ªarc4random()

arc4random()ä½¿ç”¨äº†arc4å¯†ç åŠ å¯†çš„key streamç”Ÿæˆå™¨ï¼Œäº§ç”Ÿä¸€ä¸ª[0, 2
                &hellip;
                </p>
                <div class="post-list__meta"><time datetime="2018-06-01T09:30:56.000Z" class="post-list__meta--date date">2018-06-01</time>
 &#8226; <span class="post-list__meta--tags tags">äº&nbsp;
  <a class="tag-link" href="/tags/iOSå¼€å‘/">iOSå¼€å‘</a>, <a class="tag-link" href="/tags/macOSå¼€å‘/">macOSå¼€å‘</a>

</span><a class="btn-border-small" href="/2018/06/01/20180601Random/">ç»§ç»­é˜…è¯»</a></div>

            </div>
        
   
</section>



  <div id="gitalk-container" style="padding: 0px 30px 0px 30px;"></div> 

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
  <script type="text/javascript">

  if(true){
    var gitalk = new Gitalk({
      clientID: '15c55ed469ea673ae332',
      clientSecret: '1801dbf9b1589c256260c85d779eb51d0cf40885',
      repo: 'gitment-comments',
      owner: 'sunyazhou13',
      admin: ['sunyazhou13'],
      id: 'Fri Jun 08 2018 09:18:03 GMT+0800',
      distractionFreeMode: 'true'
  })
  gitalk.render('gitalk-container') 
  }
  </script>




            <footer class="footer">
    <span class="footer__copyright">
        æœ¬ç«™ç‚¹é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>
    </span>
    <span class="footer__copyright">
        åŸºäº <a href="http://hexo.io">Hexo</a> æ­å»ºï¼Œæ„Ÿè°¢ <a href="https://pages.github.com/">GitHub Pages</a> å’Œ Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a> æä¾›å…è´¹çš„æ‰˜ç®¡æœåŠ¡
    </span>
    <span class="footer__copyright">
        &copy; 2018 - æœ¬ç«™ç”± <a href="/">@sunyazhou13</a> åˆ›å»º,
        ä½¿ç”¨<a href="https://github.com/lenbo-ma/hexo-theme-vno">hexo-theme-vno</a>ä¸»é¢˜,
        ä¿®æ”¹è‡ª<a href="https://github.com/onevcat/vno" target="_blank">å–µç¥çš„vno</a>
    </span>
</footer>

        </div>
    </div>

    <script src="https://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/main.js"></script>

     





    
</body>
</html>
